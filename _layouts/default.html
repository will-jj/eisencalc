---
layout: default
title: Battle Facilities Calculator
---
<html lang="us">
<link rel="icon" type="image/png" href="//to-metrion.github.io/_images/favicon.ico" />

<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="UTF-8" />
	{% seo %}
	<title>{{ page.title }}</title>
	<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
	<link id="select2css" type="text/css" rel="stylesheet" href="/_css/select2.css" />
	<link id="apcalccss" type="text/css" rel="stylesheet" href="_css/dark_ap_calc.css" />
	<link id="nbcalccss" type="text/css" rel="stylesheet" href="_css/dark_nb_calc.css" />
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.0.min.js"></script>
	<script type="text/javascript" src="/_scripts/themes.js"></script>
	<base target="_blank">
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<!--script async src="https://www.googletagmanager.com/gtag/js?id=UA-115954423-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}
		gtag("js", new Date());

		gtag("config", "UA-115954423-1");
	</script-->
</head>

<body>

	{% include header_bar.html %}

	<div class="container">

		{{ content }}

	</div>
	<script>
		if (document.getElementById("theme") != null && document.getElementById("midimg") != null) {
			var drop = $("#theme").val();

			$('#midimg')[0].src = "{{ site.baseurl }}/_images/tower.png";
		}
	</script>
	<script type="text/javascript" src="{{ site.baseurl }}/_scripts/themes_choose.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    var selects = document.querySelectorAll('.boost.calc-trigger');
    selects.forEach(function(select) {
        let accumulatedDelta = 0;
        const threshold = 50;  // Adjust this value to control sensitivity

        select.addEventListener('wheel', function(event) {
            event.preventDefault(); // Prevents the page from scrolling when using the wheel over the dropdown
            accumulatedDelta += event.deltaY;

            if (Math.abs(accumulatedDelta) > threshold) {
                var currentIndex = select.selectedIndex;
                if (accumulatedDelta < 0) {
                    // Scroll up
                    select.selectedIndex = Math.max(currentIndex - 1, 0);
                } else {
                    // Scroll down
                    select.selectedIndex = Math.min(currentIndex + 1, select.options.length - 1);
                }
                accumulatedDelta = 0; // Reset the accumulator after changing the index

                // Trigger the change event if the index has changed
                if (select.selectedIndex !== currentIndex) {
                    select.dispatchEvent(new Event('change'));
                }
            }
        }, {passive: false});
    });
});
</script>

<!-- At some point lego's calc was updated to use localstorage instead of cookies. Therefore the privacy warning can be removed. -->
	<!--div class="privacyNotice" style="color:#000;border:solid black 2px;border-radius:4px;z-index:999;text-align:center;position:fixed;bottom:0;width:70%;margin-left:15%;padding-top:4px;background-color:#ffffab;display:none;">
		This site uses cookies for analytics and personalized content. By continuing to browse this site, you agree to this use.
		<br />
		<a id="cookie-dismisser" style="text-decoration:underline;cursor:pointer;">Click here to dismiss this message</a>.
		<br />
		<br />
		Learn more about our use of <a href="./privacy/">cookies</a> and how to control them on our site.
	</div-->

	{% include footer.html %}

	<!--script type="text/javascript" src="{{ site.baseurl }}/_scripts/cookieNotice.js"></script-->

</body>

</html>
